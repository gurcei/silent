#OUTPUT "STARFIELD"' ¬¡ŒÀ4 ÕEMORY USAGE' ------------------' 4.0000 ƒÕ¡-Ã…”‘' 4.0020 VAR INTERFACE TO ASSEMBLY'        0020: PTR TO DEFAULTØRED&'        0022: PTR TO DEFAULTØGREEN&'        0024: PTR TO DEFAULTØBLUE&'        0026: PTR TO CURRØRED&'        0028: PTR TO CURRØGREEN&'        002A: PTR TO CURRØBLUE&'        002C: PTR TO DATAØADDR%'        002E: PTR TO CDATAØADDR%'        0030: PTR TO SCRADDR%'        0032: PTR TO CLRADDR%'        0034: PTR TO INC%' 4.0800 ”√“≈≈Œ Õ≈Õœ“Ÿ' 4.2000 –≈‘”√…… «“¡–»…√” FOR ¬¡” LOGO' ¬¡ŒÀ5 ÕEMORY USAGE' ------------------' 5.0000 SCREEN BUFFER FOR DRAWØPETSCIIØFRAME' 5.1000 COLOR RAM BUFFER FOR DRAWØPETSCIIØFRAME'--------.DECLARES'--------#DECLARE STARX(20), STARY(20), STARVX(20)#DECLARE K#DECLARE FNAME$, VAL&#DECLARE LDATA&(12288), DIDX%=0, PIDX%=0#DECLARE GROUPØFLAG&, VAL&, REVØFLAG& = 0#DECLARE OFFS, VER=2#DECLARE LASTFLAG, LASTØGROUPØIDX#DECLARE OLDX, OLDY, OLDOFFS, X, Y, A$, XX, YY, DEBUG, Z$'-------.DEFINES'-------#DEFINE œ–Ø√œ–Ÿ = 0#DEFINE œ–ØÕ…ÿ  = 1#DEFINE œ–Ø”◊¡– = 2#DEFINE œ–Ø∆…ÃÃ = 3'----.MAIN'----  GOSUB INIT.LOOP  GOSUB DRAWØSTARFIELD  GOSUB PAGEØFLIP  GOSUB ITERØSTARFIELD  SLEEP .1  GOTO LOOP  END'----.INIT'----  PRINT CHR$(27);"5";  FOR K = 0 TO 20    STARX(K) = INT(RND(1)*80)    STARY(K) = INT(RND(1)*50)    STARVX(K) = RND(1)*4 + .5  NEXT K  ' CLEAR THE OFFSCREEN BUFFER  EDMA 3, $FA0, 32, $50000  EDMA 3, $FA0, 0, $51000  FNAME$ = "ANA.LN"  VER = 1  GOSUB LOADØLINEØFILE  RETURN'--------------.LOADØLINEØFILE'-------------- ' (FNAME$)  IF FNAME$ = "" THEN RETURN  GOSUB LINEØFILEØINIT  DOPEN #2,(FNAME$),R,U8  DO    GET #2, VAL&    IF ST THEN EXIT    LDATA&(DIDX%) = VAL&    DIDX% = DIDX% + 1  LOOP  DCLOSE #2  GOSUB PLAYØDATA  RETURN'----.LINEØFILEØINIT'----  OLDX = -1 : OLDY = -1 : OLDOFFS = 0  DIDX% = 0  GROUPØFLAG& = 0 : REVØFLAG& = 0  OFFS = 0  RETURN'--------------.DRAWØSTARFIELD'--------------  FOR K = 0 TO 20    POKE $50000 + STARX(K) + STARY(K) * 80, 46  ' DOT  NEXT K  RETURN'--------------.ITERØSTARFIELD'--------------  FOR K = 0 TO 20    STARX(K) = MOD(STARX(K)-STARVX(K) + 80, 80)  NEXT K  RETURN'---------.PAGEØFLIP'---------  EDMA 0, $FA0, $50000, $40800  EDMA 0, $FA0, $51000, $FF80000  ' CLEAR THE OFFSCREEN BUFFER  EDMA 3, $FA0, 32, $50000  EDMA 3, $FA0, 1, $51000  RETURN'---------.PLAYØDATA'---------  PRINT "ì";  OFFS=0  PIDX% = 0  IF LASTFLAG = 1 THEN PIDX% = LASTØGROUPØIDX : LASTFLAG = 0  DO WHILE PIDX% < DIDX%    CURSOR 0,49:PRINT CHR$(27);"QPIDX=";PIDX%;"[";LDATA&(PIDX%);LDATA&(PIDX%+1);LDATA&(PIDX%+2);    VAL& = LDATA&(PIDX%) : PIDX% = PIDX% + 1    IF VER=3 AND VAL& = $FF THEN BEGIN      IF PIDX% > LASTØGROUPØIDX THEN LASTØGROUPØIDX = PIDX%      GOTO PDØENDLOOP    BEND    'IF VAL& = $FF THEN GROUPØFLAG& = 1 : GOTO PDØENDLOOP    'IF VAL& = $FE THEN GROUPØFLAG& = 0 : SLEEP .02 : GOTO PDØENDLOOP    X = VAL& AND $7F    IF VER=2 THEN BEGIN      X = VAL&      VAL& = LDATA&(PIDX%)      PIDX% = PIDX% + 1      X = X + (VAL& AND $7F) * 256    BEND    IF VAL& AND $80 THEN PRINT ""; : ELSE PRINT "í";    Y = LDATA&(PIDX%) : PIDX% = PIDX% + 1    A$ = CHR$(LDATA&(PIDX%)) : PIDX% = PIDX% + 1    IF VER=2 THEN BEGIN      DO WHILE X-OFFS > 78        GOSUB SCROLLØCANVASØRIGHT        PRINT "";CHR$(27);"QOFFS=";OFFS;      LOOP    BEND    XX = X-OFFS : YY = Y: CURSOR XX, YY : GOSUB DRAWØCHAR    IF DEBUG=1 THEN GET KEY Z$      'PRINT "";CHR$(27);"Q X,Y,PIDX,A$=";X;Y;PIDX%,ASC(A$)      'GET KEY A$    IF GROUPØFLAG& = 0 THEN SLEEP .02.PDØENDLOOP  LOOP  X = X-OFFS  RETURN'-------------------.SCROLLØCANVASØRIGHT'-------------------  OFFS=OFFS+1  FOR YY = 0 TO 49    EDMA œ–Ø√œ–Ÿ, 79, $40801 + YY*80, $40800 + YY*80    POKE $40800 + 79 + YY*80, 32   NEXT YY                  RETURN'---------.DRAWØCHAR'---------  ' POKE $40800 + X + Y*80, ASC(A$)  ' POKE $FF80000 + X + Y*80, RCOLOR(1)  PRINT A$;  RETURN