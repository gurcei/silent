#OUTPUT "PETLINE"' DRAW LINES IN 80X50 WITH PETSCII BLOCK CHARS' GIVING A FULL RESOLUTION OF 160X100' ноте: вHEN и LATER WANT TO MOVE THE LOGIC INTO ASSEMBLY,' CONSIDER REFERENCING GRIM FANDANGO'S мегаплот ASSEMBLY SOURCE:' - HTTPS://GITHUB.COM/GRIM-FANDANGO/MEGAPLOT/BLOB/MASTER/MEGAPLOT.A'--------.DECLARES'--------#DECLARE пиь╞тл = 126#DECLARE пиь╞тр = 124#DECLARE пиь╞бл = 123#DECLARE пиь╞бр = 108#DECLARE пиь╞инж╞тл = 254#DECLARE пиь╞инж╞тр = 252#DECLARE пиь╞инж╞бл = 251#DECLARE пиь╞инж╞бр = 236#DECLARE пиь╞диаг╞тл╞бр = 127#DECLARE пиь╞диаг╞бл╞тр = 255#DECLARE пиь╞хлине╞бот = 98#DECLARE пиь╞хлине╞топ = 226#DECLARE пиь╞жлине╞лефт = 97#DECLARE пиь╞жлине╞ригхт = 225#DECLARE пиь╞ноне = 32#DECLARE пиь╞алл = 160#DECLARE пи = 3.141592654269'----.VARS'----#DECLARE X1, Y1, X2, Y2#DECLARE DX, DY, MX, MY, CX, CY#DECLARE CUR╞CHAR, PIX#DECLARE DIFFX, DIFFY, DELTAX, DELTAY, TANVAL, ANGLE#DECLARE A$, ANG, LINE╞LENGTH, K, DEBUG'----.MAIN'----  GOSUB INIT  FOR ANG = 0 TO 2*пи STEP пи / 8    X1 = 80    Y1 = 50    X2 = INT(80 + 30 * COS(ANG))    Y2 = INT(50 + 30 * SIN(ANG))    ' CURSOR 0,20:PRINT CHR$(27);"QX1 =";X1;", Y1 =";Y1    ' CURSOR 0,21:PRINT CHR$(27);"QX2 =";X2;", Y2 =";Y2    ' GET KEY A$    ' IF A$="D" THEN DEBUG = 1: ELSE DEBUG = 0    GOSUB DRAW╞LINE  NEXT ANG  END'---------.DRAW╞LINE'---------  DIFFX = X2-X1  DIFFY = Y2-Y1  LINE╞LENGTH = SQR(DIFFX*DIFFX + DIFFY*DIFFY)    IF DIFFX = 0 THEN BEGIN    DELTAX = 0    IF DIFFY<0 THEN DELTAY = -1    IF DIFFY>0 THEN DELTAY = 1  BEND:ELSE BEGIN    TANVAL = DIFFY / DIFFX    ANGLE = ATN(TANVAL)  ' THIS IS RANGE -90DEG TO 90DEG    IF DIFFX<0 THEN BEGIN     IF DIFFY<0 THEN ANGLE = ANGLE - пи:ELSE ANGLE = ANGLE + пи    BEND    DELTAX = COS(ANGLE)    DELTAY = SIN(ANGLE)  BEND  CX = X1 : CY = Y1  FOR K = 1 TO LINE╞LENGTH    GOSUB DRAW╞PIXEL    CX = CX + DELTAX    CY = CY + DELTAY    IF DEBUG=1 THEN BEGIN      CURSOR 0,15:PRINT CHR$(27);"QCX =";CX;", CY =";CY      CURSOR 0,22:PRINT CHR$(27);"QDIFFX =";DIFFX;", DIFFY =";DIFFY      GET KEY A$    BEND  NEXT K  GOSUB DRAW╞PIXEL  RETURN'----------.DRAW╞PIXEL'----------  ' PIXEL CROPPED?  IF CX<0 OR CX>159 OR CY<0 OR CY>99 THEN RETURN  DX = INT(CX/2) : DY = INT(CY/2)  MX = MOD(INT(CX),2) : MY = MOD(INT(CY),2)    ' CURSOR 0,16:PRINT CHR$(27);"QDX =";DX;", DY =";DY    ' CURSOR 0,17:PRINT CHR$(27);"QMX =";MX;", MY =";MY  CUR╞CHAR = PEEK($40800 + DX + DY * 80)  GOSUB READ╞ON╞PIXELS  IF MX = 0 AND MY = 0 THEN PIX = PIX OR 1  IF MX = 1 AND MY = 0 THEN PIX = PIX OR 2  IF MX = 0 AND MY = 1 THEN PIX = PIX OR 4  IF MX = 1 AND MY = 1 THEN PIX = PIX OR 8  GOSUB SET╞ON╞PIXELS  POKE $40800 + DX + DY * 80, CUR╞CHAR  RETURN'--------------.READ╞ON╞PIXELS'--------------  PIX = 0 ' BITFIELDS: TL = 1, TR = 2, BL = 4, BR = 8  IF CUR╞CHAR = пиь╞тл THEN PIX = 1:RETURN  IF CUR╞CHAR = пиь╞тр THEN PIX = 2:RETURN  IF CUR╞CHAR = пиь╞бл THEN PIX = 4:RETURN  IF CUR╞CHAR = пиь╞бр THEN PIX = 8:RETURN  IF CUR╞CHAR = пиь╞инж╞тл THEN PIX=14:RETURN  IF CUR╞CHAR = пиь╞инж╞тр THEN PIX=13:RETURN  IF CUR╞CHAR = пиь╞инж╞бл THEN PIX=11:RETURN  IF CUR╞CHAR = пиь╞инж╞бр THEN PIX=7:RETURN  IF CUR╞CHAR = пиь╞диаг╞тл╞бр THEN PIX=9:RETURN  IF CUR╞CHAR = пиь╞диаг╞бл╞тр THEN PIX=6:RETURN  IF CUR╞CHAR = пиь╞хлине╞бот THEN PIX=12:RETURN  IF CUR╞CHAR = пиь╞хлине╞топ THEN PIX=3:RETURN  IF CUR╞CHAR = пиь╞жлине╞лефт THEN PIX=5:RETURN  IF CUR╞CHAR = пиь╞жлине╞ригхт THEN PIX=10:RETURN  IF CUR╞CHAR = пиь╞алл THEN PIX=15:RETURN  RETURN'-------------.SET╞ON╞PIXELS'-------------  IF PIX = 0 THEN CUR╞CHAR = пиь╞ноне:RETURN  IF PIX = 1 THEN CUR╞CHAR = пиь╞тл:RETURN  IF PIX = 2 THEN CUR╞CHAR = пиь╞тр:RETURN  IF PIX = 3 THEN CUR╞CHAR = пиь╞хлине╞топ:RETURN  IF PIX = 4 THEN CUR╞CHAR = пиь╞бл:RETURN  IF PIX = 5 THEN CUR╞CHAR = пиь╞жлине╞лефт:RETURN  IF PIX = 6 THEN CUR╞CHAR = пиь╞диаг╞бл╞тр:RETURN  IF PIX = 7 THEN CUR╞CHAR = пиь╞инж╞бр:RETURN  IF PIX = 8 THEN CUR╞CHAR = пиь╞бр:RETURN  IF PIX = 9 THEN CUR╞CHAR = пиь╞диаг╞тл╞бр:RETURN  IF PIX = 10 THEN CUR╞CHAR = пиь╞жлине╞ригхт:RETURN  IF PIX = 11 THEN CUR╞CHAR = пиь╞инж╞бл:RETURN  IF PIX = 12 THEN CUR╞CHAR = пиь╞хлине╞бот:RETURN  IF PIX = 13 THEN CUR╞CHAR = пиь╞инж╞тр:RETURN  IF PIX = 14 THEN CUR╞CHAR = пиь╞инж╞тл:RETURN  IF PIX = 15 THEN CUR╞CHAR = пиь╞алл:RETURN  RETURN'----.INIT'----  PRINT CHR$(27);"5";CHR$(147);  RETURN  