' =======================' ”…Ã≈Œ‘ ≈Œ…«Õ¡ ¬œœ‘ Õ≈Œ’' =======================#OUTPUT "AUTOBOOT.C65"'-------.DEFINES'-------#DECLARE ROM$, VM$, FNAME$#DECLARE MASK%, MONTH%, YEAR%, DS%, DATE$#DECLARE FPGAØHASH$, REVERSE%, UPPER, LOWER#DECLARE A$, K, OFFS, XEMUØFLAG'----.INIT'----  BANK 128  OFFS = $FFD3630  POKE $D020, 0, 0  PRINT CHR$(27);"8"  'PRINT CHR$(142);  ' SWITCH BACK TO UPPER-CASE  PRINT CHR$(14);  ' LOWER-CASE'----.MAIN'----  GOSUB SHOWØMAINØMENU  GET KEY A$  IF A$="1" THEN GOSUB PERFORMØCHECKS  IF A$="2" THEN GOSUB SHOWØABOUT  IF A$="3" THEN GOSUB SHOWØSOURCEØLIST  IF A$="4" THEN PRINT "ìBYE!";:END    GOTO MAIN  END'--------------.SHOWØMAINØMENU'--------------  PRINT "ì";  PRINT "'ê‘HE ü”";CHR$(156);"ILEûNÅT ï≈ñNóIòGôMöA' ƒEMO  -  öGURCE/BAS  -  1ST  UNE 2024"  PRINT "========================"  PRINT  PRINT "¡S EXCLUSIVELY PREMIERED BY üRETRO√OMBS!"  PRINT  PRINT "ü1) –LAY DEMO"  PRINT "ü2) ¡BOUT THIS DEMO"  PRINT "ü3) ¬ROWSE THE SOURCE CODE"  PRINT "ü/) ≈XIT"  RETURN'--------------.PERFORMØCHECKS'--------------  GOSUB XEMUØCHECK  IF XEMUØFLAG = 0 THEN BEGIN    GOSUB COREØCHECK  BEND  GOSUB ROMØCHECK  GOSUB NTSCØTOØPAL  CLR  DLOAD "SILENT"  RETURN'----------.COREØCHECK'----------  GOSUB FORMATØDATESTAMP  GOSUB FORMATØFPGAØHASH  IF FPGAØHASH$<>"E296C3C9" THEN BEGIN    PRINT "ì√œ“≈ ◊¡“Œ…Œ«: ‘HIS DEMO PRESENTLY WORKS BEST USING:"    PRINT "- ƒEVELOPMENT CORE: E296C3C9  2024-05-24"    PRINT "-        ŸOUR CORE: ";FPGAØHASH$;"  ";DATE$;""    PRINT    PRINT "∆OR BEST DEMO PERFORMANCE:"    PRINT "- –LEASE DOWNLOAD IT FROM:"    PRINT "  - üHTTPS://BUILDER.MEGA65.ORG/JOB/MEGA65-CORE/JOB/DEVELOPMENT/108"    PRINT    PRINT "- ’NZIP THE 'üMEGA65*.7Z' FILE AND LOCATE THE .COR FILE WITHIN"    PRINT "- –LACE IT ON YOUR SD-CARD"    PRINT "- –OWER UP WITH THE 'üNO SCROLL' KEY AND FLASH IT TO A SPARE SLOT"    PRINT "- ”ELECT THIS CORE FROM THE FLASH MENU TO RUN IT"    PRINT    PRINT "‘HIS CORE CONTAINS HYPPO REPAIRS NEEDED BY THE DEMO:"    PRINT "- FIX TO GET/SET MAP CALLS"    PRINT "- FIX TO BOOT FROM 'Õ≈«¡659.“œÕ'"    PRINT    PRINT "…F YOU HAVE A NEWER DEVELOPMENT ROM, IT SHOULD WORK FINE TOO."    PRINT    PRINT "û–RESS ANY KEY TO CONTINUE..."    GET KEY A$  RETURN'----------.SHOWØABOUT'----------  PRINT "ìñ¡¬œ’‘"  PRINT  "====="  PRINT "… HAD BEEN ACCUMULATING LITTLE SNIPPETS OF IDEAS … HAD WRITTEN IN ¬¡”…√ 65"  PRINT "OVER THE PAST YEAR, THINKING THERE WOULD COME A TIME … WOULD BE ABLE TO"  PRINT "STITCH THEM ALL TOGETHER INTO A NICE CUTE DEMO TO ONCE AGAIN SHOWCASE"  PRINT "THE FUN THAT CAN BE HAD IN ü¬¡”…√ 65."  PRINT  PRINT "‘HAT OPPORTUNITY CAME TO ME THIS ÕAY AND … PUSHED HARD TO STITCH THEM"  PRINT "ALL TOGETHER. ¡LONG THE WAY, … THOUGHT …'D BRUSH UP ON MY ASSEMBLY"  PRINT "LANGUAGE SKILLS AND RELIEVE SOME OF THE PERFORMANCE BOTTLENECKS … WAS"  PRINT "FACING."  PRINT  PRINT "- ü¬¡”…√ 65 CODE WAS WRITTEN IN ü≈LEVEN"  PRINT "- ü¡SSEMBLY CODE WAS WRITTEN IN üÕEGA ¡SSEMBLER AND ü¡CME"  PRINT "- ¡LL VISUAL ASPECTS OF THE DEMO ARE ü100% –≈‘”√……"  PRINT "- ‘HE MUSIC OF THE DEMO IS PERFORMED BY ü¬¡”…√ 65'S '–Ã¡Ÿ' COMMAND"  PRINT "û–RESS ANY KEY TO CONTINUE..."  GET KEY A$  PRINT "ìñ¡¬œ’‘"  PRINT  "====="  PRINT "… HAVE ADDED THE SOURCE CODE ON THIS DISK, AND YOU'RE WELCOME TO HAVE"  PRINT "A BROWSE OF IT!"  PRINT  PRINT "… WILL ALSO AIM TO SHARE THE REPOSITORY IN GITHUB AT:"  PRINT "- üHTTPS://GITHUB.COM/GURCEI/SILENT"  PRINT   PRINT "»OPE YOU ENJOY THE DEMO! :)"  PRINT  PRINT "öGURCE/BAS"  PRINT "û–RESS ANY KEY TO CONTINUE..."  GET KEY A$  RETURN'----------------.SHOWØSOURCEØLIST'----------------  PRINT "ìñÕ¡…Œ ”œ’“√≈ ∆…Ã≈”"  PRINT "================="  PRINT "ü1) SILENT.PRJ"  PRINT "ü2) SILENT.EL"  PRINT "ü3) SILENT2.EL"  PRINT "ü4) ROTATE.ASM"  PRINT "ü5) ASMHELPER.A"  PRINT  PRINT "ñÕ…”√. ∆…Ã≈”"  PRINT "==========="  PRINT "ü6) BASLOGO.EL"  PRINT "ü7) STARFIELD.EL"  PRINT "ü8) LINE.EL"  PRINT "ü9) PETLINE.EL"  PRINT "üA) ROTATE.EL"  PRINT "üB) WRITER.EL"  PRINT "üC) MELODY.EL"  PRINT "üD) AUTOBOOT.EL"  PRINT  PRINT "ü/) ≈XIT"  GET KEY A$  IF A$="1" THEN GOSUB SILENTØPRJ  IF A$="2" THEN GOSUB SILENTØEL  IF A$="3" THEN GOSUB SILENT2ØEL  IF A$="4" THEN GOSUB ROTATEØASM  IF A$="5" THEN GOSUB ASMHELPERØA  IF A$="6" THEN GOSUB BASLOGOØEL  IF A$="7" THEN GOSUB STARFIELDØEL  IF A$="8" THEN GOSUB LINEØEL  IF A$="9" THEN GOSUB PETLINEØEL  IF A$="A" THEN GOSUB ROTATEØEL  IF A$="B" THEN GOSUB WRITERØEL  IF A$="C" THEN GOSUB MELODYØEL  IF A$="D" THEN GOSUB AUTOBOOTØEL  IF A$="/" THEN RETURN  GOTO SHOWØSOURCEØLIST  RETURN.AUTOLOADØ11'-----------  PRINT "ìAUTOLOAD ";CHR$(34);FNAME$;CHR$(34):CLR:DLOAD "11BOOT.C65"  RETURN.SILENTØPRJ  RETURN.SILENTØEL  RETURN.SILENT2ØEL  RETURN.ROTATEØASM  RETURN.ASMHELPERØA  RETURN.BASLOGOØEL  RETURN.STARFIELDØEL  RETURN.LINEØEL  RETURN.PETLINEØEL'----------  DO    PRINT "ì";    PRINT "ñPETLINE.EL"    PRINT "=========="    PRINT "… USED THIS PROGRAM TO EXPLORE GRIM FANDANGO'S öÕ≈«¡–Ãœ‘ UTILITY"    PRINT "WHICH COULD DRAW 2X2 –≈‘”√…… DOTS ON THE SCREEN."    PRINT "  - öHTTPS://GITHUB.COM/GRIM-FANDANGO/MEGAPLOT"    PRINT    PRINT "¡FTER TRYING TO DRAW A LINE BY CALLING IT FROM ¬¡”…√ PER EACH PIXEL,"    PRINT "IT PROVED TOO SLOW THAT WAY, SO … PORTED THE LINE-DRAWING LOGIC TO"    PRINT "ASSEMBLY AND ADDED THE LINE-DRAWING FACILITY INTO HIS UTILITY."    PRINT    PRINT "¡S HE USED ¡CME COMPILER FOR HIS ASSEMBLY CODE, … FOLLOWED SUIT AND"    PRINT "ADDED TO HIS 'öMEGAPLOT.A' FILE."    PRINT    PRINT "…'LL AIM TO MAKE A –“ TO PUSH MY CHANGES INTO HIS REPO SOON."    PRINT    PRINT "ü“≈‘’“Œ) œPEN 'ñPETLINE.EL' IN ≈LEVEN"    PRINT " ü”–¡√≈) “UN 'ñPETLINE' (COMPILED SOURCE)"    PRINT "     ü/) ≈XIT"    GET KEY A$    IF A$=CHR$(13) THEN FNAME$="PETLINE.EL":GOTO AUTOLOADØ11    IF A$=" " THEN CLR:DLOAD "PETLINE"  LOOP WHILE A$<>"/"  A$=""  RETURN.ROTATEØEL'---------  DO    PRINT "ì";    PRINT "ñROTATE.EL"    PRINT "========="    PRINT "‘HIS WAS MY INITIAL ATTEMPT AT DRAWING A ROTATING SPIRAL USING RADIAL"    PRINT "COORDINATES. ¡FTER THE INITIAL ¬¡”…√ 65 ATTEMPT PROVED TOO SLUGGISH,"    PRINT "… DECIDED TO PORT THE ROTATION LOGIC TO ASSEMBLY IN 'öROTATE.ASM'."    PRINT    PRINT "… LATER ADDED THE LOGIC TO DRAW THE CREDITS/GREETING TEXT OVER THE TOP"    PRINT "OF IT (CONTAINED IN THE 'öGREETS.T' FILE)."    PRINT    PRINT "ü“≈‘’“Œ) œPEN 'ñROTATE.EL' IN ≈LEVEN"    PRINT " ü”–¡√≈) “UN 'ñROTATE' (COMPILED SOURCE)"    PRINT "     ü/) ≈XIT"    GET KEY A$    IF A$=CHR$(13) THEN FNAME$="ROTATE.EL":GOTO AUTOLOADØ11    IF A$=" " THEN CLR:DLOAD "ROTATE"  LOOP WHILE A$<>"/"  A$=""  RETURN.WRITERØEL'---------  DO    PRINT "ì";    PRINT "ñWRITER.EL"    PRINT "========="    PRINT "¡FTER MAKING THE 'öABC.LN' FONT VIA THE 'öLINE.EL' TOOL, … MADE THIS"    PRINT "SMALL PROGRAM TO TRY MAKE USE OF THE FONT TO DRAW TEXT ON THE FLY WITH"    PRINT "THE FONT."    PRINT    PRINT "ü“≈‘’“Œ) œPEN 'ñWRITER.EL' IN ≈LEVEN"    PRINT " ü”–¡√≈) “UN 'ñWRITER' (COMPILED SOURCE)"    PRINT "     ü/) ≈XIT"    GET KEY A$    IF A$=CHR$(13) THEN FNAME$="WRITER.EL":GOTO AUTOLOADØ11    IF A$=" " THEN CLR:DLOAD "WRITER"  LOOP WHILE A$<>"/"  A$=""  RETURN.MELODYØEL'---------  DO    PRINT "ì";    PRINT "ñMELODY.EL"    PRINT "========="    PRINT "◊HILE …'M A BIG FAN OF ¬¡”…√ 65'S –Ã¡Ÿ COMMAND, … ADMIT THAT AFTER "    PRINT "MANUALLY SEQUENCING PLAY STRINGS FOR SEVERAL SONGS, IT DOES GET QUITE "    PRINT "TEDIOUS. ”O … TRIED MAKING THIS TOOL TO MAKE IT EASIER FOR ME TO "    PRINT "SEQUENCE SUCH PLAY STRINGS."    PRINT    PRINT "… MADE USE OF THIS TOOL FOR THE SONG USED BY THIS DEMO."    PRINT    PRINT "’SAGE:"    PRINT "- –RESS ö∆5 TO BUILD FROM SOURCE"    PRINT "- –RESS ö∆1 TO LOAD A SONG (TRY LOADING 'öENIGMA.P')"    PRINT "- –RESS ö∆9 TO OPEN SEQUENCER"    PRINT "- –RESS ö”HIFT+“ETURN TO PLAY SEQUENCE"    PRINT    PRINT "ü“≈‘’“Œ) œPEN 'ñMELODY.EL' IN ≈LEVEN"    PRINT " ü”–¡√≈) “UN 'ñPLAYMAKER' (COMPILED SOURCE)"    PRINT "     ü/) ≈XIT"    GET KEY A$    IF A$=CHR$(13) THEN FNAME$="MELODY.EL":GOTO AUTOLOADØ11    IF A$=" " THEN CLR:DLOAD "PLAYMAKER"  LOOP WHILE A$<>"/"  A$=""  RETURN.AUTOBOOTØEL'-----------  DO    PRINT "ì";    PRINT "ñAUTOBOOT.EL"    PRINT "==========="    PRINT "◊HILE PREPARING THIS BOOT MENU (WHICH IS TYPICALLY AN 'öAUTOBOOT.C65' FILE)"    PRINT "… THOUGHT, WHY NOT WRITE THIS IN ≈LEVEN TOO?"    PRINT    PRINT "¡S … HAD WANTED TO HAVE SOME CORE/ROM/XEMU CHECK LOGIC WITHIN IT, …"    PRINT "FELT IT WAS BETTER TO HAVE SUCH ROUTINES WRITTEN IN ≈LEVEN, SO THAT"    PRINT "THEY COULD BE MORE EASILY COPY/PASTED INTO MY (OR EVEN YOUR!) FUTURE"    PRINT "PROJECTS."    PRINT    PRINT "ü“≈‘’“Œ) œPEN 'ñAUTOBOOT.EL' IN ≈LEVEN"    PRINT "     ü/) ≈XIT"    GET KEY A$    IF A$=CHR$(13) THEN FNAME$="AUTOBOOT.EL":GOTO AUTOLOADØ11    IF A$="/" THEN A$="":RETURN    GOTO AUTOBOOTØEL  LOOP WHILE A$<>"/"  A$=""  RETURN'----------.XEMUØCHECK'----------  IF NOT (PEEK($FFD360F) AND $20) THEN XEMUØFLAG = 1  IF XEMUØFLAG = 0 THEN RETURN  PRINT "ìXEMU NOTE: YOU ARE RUNNING THIS DEMO IN THE XEMU EMULATOR."  PRINT  PRINT "PLEASE NOTE THAT SOME ASPECTS OF THIS DEMO RUN SLIGHTLY FASTER"  PRINT "UNDER XEMU COMPARED TO REAL HARDWARE (LIKELY DUE TO DIFFERENCES IN"  PRINT "HOW MUCH TIME IS CONSUMED FOR DMA CALLS, BUT STILL TO BE INVESTIGATED)"  PRINT  PRINT "APART FROM THAT, IT SHOULD STILL RUN FINE."  PRINT "ûPRESS ANY KEY TO CONTINUE..."  GET KEY A$  RETURN'-----------.NTSCØTOØPAL'-----------  IF (PEEK($D06F) AND 128)=0 THEN VM$ = "PAL":ELSE VM$="NTSC"  IF VM$ = "PAL" THEN RETURN  PRINT "ìTHIS PROGRAM REQUIRES SWITCHING FROM NTSC TO PAL"  PRINT  PRINT "WILL SWITCH OVER NOW."  PRINT "ûPRESS ANY KEY TO CONTINUE..."  GET KEY A$  POKE $FFD306F,$00  POKE $FFD3072,$00  POKE $FFD3048,$68  POKE $FFD3049,$00 OR (PEEK($FFD3049) AND $F0)  POKE $FFD304A,$F8  POKE $FFD304B,$01 OR (PEEK($FFD304B) AND $F0)  POKE $FFD304E,$68  POKE $FFD304F,$00 OR (PEEK($FFD304F) AND $F0)  POKE $FFD3072,$00  POKE $FFD3C0E, PEEK($FFD3C0E) OR $80  POKE $FFD3D0E, PEEK($FFD3D0E) OR $80  RETURN'---------.ROMØCHECK'---------  FOR K = 0 TO 5    ROM$=ROM$ + CHR$(PEEK($20017+K))  NEXT K  IF ROM$<>"999999" THEN BEGIN    PRINT "ìROM WARNING: THIS DEMO PRESENTLY WORKS BEST USING:"    PRINT "- EXPERIMENTAL ROM: V999999"    PRINT "-         YOUR ROM: V";ROM$;""    PRINT    PRINT "FOR BEST DEMO PERFORMANCE:"    PRINT "- PLEASE DOWNLOAD IT FROM üHTTPS://GURCE.NET/999999.BIN"    PRINT "- RENAME IT TO 'üMEGA65ñ9ü.ROM'"    PRINT "    (YES, ADD THE 'ñ9' TO THE END)"    PRINT "- PLACE IT ON YOUR SD-CARD"    PRINT "- REBOOT YOUR MEGA65 WHILE HOLDING DOWN THE 'ñ9' KEY"    PRINT    PRINT "IF NOT DONE, YOU WILL EXPERIENCE MUSIC SLOWDOWN ISSUES DUE TO "    PRINT "EXISTING/OLDER ROMS BLOCKING BASIC 'PLAY' COMMAND WHILE IN SYS CALLS"    PRINT    PRINT "NEWER ROMS MADE AFTER THIS DEMO WILL LIKELY HAVE REPAIRED THIS MATTER."    PRINT    PRINT "ûPRESS ANY KEY TO CONTINUE..."    GET KEY A$  BEND  RETURN'----------------.FORMATØDATESTAMP'----------------' ¡ PORT OF LYDON'S FUNCTION IN "FREEZEØMEGAINFO.C"  MASK% = $FF  ' FOR MAX10, WOULD NEED TO BE $3F  MONTH% = 1  YEAR% = 2020  DS% = ((PEEK(OFFS + 1) AND MASK%) << 8) + PEEK(OFFS)  DO WHILE DS% > 366    YEAR% = YEAR% + 1    DS% = DS% - 366  LOOP  IF MONTH%=1 AND DS%=31 THEN BEGIN    MONTH% = MONTH% + 1    DS% = DS% - 31  BEND  IF MONTH%=2 AND NOT (YEAR% AND 3) AND DS%>29 THEN BEGIN    MONTH% = MONTH% + 1    DS% = DS% - 29  BEND  IF MONTH%=2 AND (YEAR% AND 3) AND DS%>28 THEN BEGIN    MONTH% = MONTH% + 1    DS% = DS% - 28  BEND  IF MONTH%=3 AND DS%>31 THEN BEGIN    MONTH% = MONTH% + 1    DS% = DS% - 31  BEND  IF MONTH%=4 AND DS%>30 THEN BEGIN    MONTH% = MONTH% + 1    DS% = DS% - 30  BEND  IF MONTH%=5 AND DS%>31 THEN BEGIN    MONTH% = MONTH% + 1    DS% = DS% - 31  BEND  IF MONTH%=6 AND DS%>30 THEN BEGIN    MONTH% = MONTH% + 1    DS% = DS% - 30  BEND  IF MONTH%=7 AND DS%>31 THEN BEGIN    MONTH% = MONTH% + 1    DS% = DS% - 31  BEND  IF MONTH%=8 AND DS%>31 THEN BEGIN    MONTH% = MONTH% + 1    DS% = DS% - 31  BEND  IF MONTH%=9 AND DS%>30 THEN BEGIN    MONTH% = MONTH% + 1    DS% = DS% - 30  BEND  IF MONTH%=10 AND DS%>31 THEN BEGIN    MONTH% = MONTH% + 1    DS% = DS% - 31  BEND  IF MONTH%=11 AND DS%>30 THEN BEGIN    MONTH% = MONTH% + 1    DS% = DS% - 30  BEND  DATE$=MID$(STR$(YEAR%),2)  IF MONTH% > 9 THEN BEGIN    DATE$ = DATE$ + "-"  BEND:ELSE BEGIN    DATE$ = DATE$ + "-0"  BEND  DATE$ = DATE$ + MID$(STR$(MONTH%), 2)  IF DS% > 9 THEN BEGIN    DATE$ = DATE$ + "-"  BEND:ELSE BEGIN    DATE$ = DATE$ + "-0"  BEND  DATE$ = DATE$ + MID$(STR$(DS%), 2)  RETURN'----------------.FORMATØFPGAØHASH'----------------' ¡ PORT OF LYDON'S FUNCTION IN "FREEZEØMEGAINFO.C"  REVERSE% = 0  ' MAX10 IS REVERSED  IF REVERSE% THEN BEGIN    UPPER = (PEEK(OFFS+2) << 8) + PEEK(OFFS+3)    LOWER = (PEEK(OFFS+4) << 8) + PEEK(OFFS+5)  BEND:ELSE:BEGIN    UPPER = (PEEK(OFFS+5) << 8) + PEEK(OFFS+4)    LOWER = (PEEK(OFFS+3) << 8) + PEEK(OFFS+2)  BEND  FPGAØHASH$ = HEX$(UPPER) + HEX$(LOWER)  RETURN  